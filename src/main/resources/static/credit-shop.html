<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ë ˆë”§ êµ¬ë§¤</title>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="icon" href="https://static.toss.im/icons/png/4x/icon-toss-logo.png"/>

    <!-- ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ìš°ì„  ì ìš©ì„ ìœ„í•œ ì„¤ì • -->
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif;
        }

        body {
            background-color: #f5f7fa;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            color: #333;
            margin-bottom: 10px;
        }

        header p {
            color: #666;
            margin-top: 15px;
        }

        /* ì„ íƒëœ íŒ¨í‚¤ì§€ì— ëŒ€í•œ ìµœìƒìœ„ ìŠ¤íƒ€ì¼ */
        .credit-package.selected {
            border: 3px solid #FF5722 !important;
            box-shadow: 0 5px 20px rgba(255, 87, 34, 0.3) !important;
            transform: translateY(-5px) !important;
            background-color: #FFF8F6 !important;
            z-index: 10 !important;
        }

        /* í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
        .credit-package, #logout-button {
            cursor: pointer !important;
        }

        /* ì„ íƒ í‘œì‹œ ì•„ì´ì½˜ ê°•ì œ í‘œì‹œ */
        .credit-package.selected .selection-mark {
            display: flex !important;
        }

        /* í¬ë ˆë”§ íŒ¨í‚¤ì§€ ìŠ¤íƒ€ì¼ */
        .credit-package {
            border: 1px solid #E5E8EB;
            border-radius: 12px;
            padding: 20px;
            width: 200px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            position: relative;
            margin-top: 25px; /* íƒœê·¸ê°€ ì˜ë¦¬ì§€ ì•Šë„ë¡ ìƒë‹¨ ì—¬ë°± ë” ì¦ê°€ */
        }

        /* ë¼ë²¨ ê³µê°„ í™•ë³´ë¥¼ ìœ„í•œ ë§ˆì§„ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ */
        .credit-package {
            margin-top: 30px; /* íƒœê·¸ê°€ ì˜ë¦¬ì§€ ì•Šë„ë¡ ìƒë‹¨ ì—¬ë°± ì¦ê°€ */
        }

        /* ì„ íƒëœ íŒ¨í‚¤ì§€ ìŠ¤íƒ€ì¼ */
        .credit-package.selected {
            border: 3px solid #FF5722 !important; /* ì„ íƒëœ íŒ¨í‚¤ì§€ì˜ í…Œë‘ë¦¬ ë‘ê»˜ */
            box-shadow: 0 5px 20px rgba(255, 87, 34, 0.3) !important; /* ì„ íƒëœ íŒ¨í‚¤ì§€ì˜ ê·¸ë¦¼ì ê°•í™” */
            transform: translateY(-5px) !important; /* ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” íš¨ê³¼ */
            z-index: 3 !important; /* ë‹¤ë¥¸ ìš”ì†Œë³´ë‹¤ ìœ„ì— í‘œì‹œ */
            background-color: #FFF8F6 !important; /* ë°°ê²½ìƒ‰ ë³€ê²½ */
            transition: all 0.3s ease !important; /* íŠ¸ëœì§€ì…˜ íš¨ê³¼ */
        }

        /* ì¸ê¸°/ìµœê³ ê°€ì¹˜ì™€ ì„ íƒ ìƒíƒœê°€ ë™ì‹œì— ì ìš©ë  ë•Œ */
        .credit-package.popular.selected {
            border: 3px solid #FF5722 !important; /* ì„ íƒ ìƒ‰ìƒ ìš°ì„  ì ìš© */
        }

        .credit-package.best-value.selected {
            border: 3px solid #FF5722 !important; /* ì„ íƒ ìƒ‰ìƒ ìš°ì„  ì ìš© */
        }

        .credit-package.popular {
            position: relative;
            border-color: #3182F6;
        }

        /* íŒ¨í‚¤ì§€ í—¤ë” ìŠ¤íƒ€ì¼ */
        .package-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }

        .credit-amount {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-right: 10px;
        }

        .credit-icon {
            font-size: 24px;
        }

        /* íŒ¨í‚¤ì§€ ë³¸ë¬¸ ìŠ¤íƒ€ì¼ */
        .package-body {
            text-align: center;
        }

        .package-price {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .package-description {
            font-size: 14px;
            color: #666;
        }

        /* ì¸ê¸° íƒœê·¸ ìŠ¤íƒ€ì¼ ìˆ˜ì • - ê°€ìƒ ìš”ì†Œ ëŒ€ì‹  ì‹¤ì œ ìš”ì†Œë¡œ ë³€ê²½ */
        .credit-package.popular .badge,
        .credit-package.best-value .badge {
            position: absolute;
            top: -15px;
            right: 10px;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            z-index: 20; /* z-index ê°’ ì¦ê°€ */
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
            white-space: nowrap;
            transform: translateY(-50%);
            overflow: visible; /* ë„˜ì¹˜ëŠ” ë¶€ë¶„ë„ í‘œì‹œë˜ë„ë¡ ì„¤ì • */
        }

        .credit-package.popular .badge {
            background-color: #3182F6;
        }

        .credit-package.best-value .badge {
            background-color: #00c471;
        }

        /* ê°€ìƒ ìš”ì†Œ ì œê±° */
        .credit-package.popular::before,
        .credit-package.best-value::before {
            content: none;
        }

        /* ìµœê³  ê°€ì¹˜ íƒœê·¸ ìŠ¤íƒ€ì¼ */
        .credit-package.best-value {
            position: relative;
            border-color: #00c471;
        }

        /* ì„ íƒëœ íŒ¨í‚¤ì§€ ì •ë³´ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .selected-package-info {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            display: block;
            width: 100%;
            overflow: visible;
            position: relative;
            z-index: 5;
        }

        /* ê²°ì œ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        #payment-button-container {
            margin: 20px auto;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        /* ê²°ì œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .payment-button {
            width: 100%;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: 600;
            background-color: #3182F6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(49, 130, 246, 0.2);
            display: block;
            margin: 20px auto;
        }

        .payment-button:hover {
            background-color: #1c64d8;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(49, 130, 246, 0.3);
        }

        /* ì‚¬ìš©ì ì •ë³´ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .user-info {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px 0 20px;
            font-size: 14px;
            color: #4a5568;
            gap: 10px;
        }

        .user-info strong {
            color: #3182F6;
            font-weight: bold;
        }

        #logout-button {
            background: none;
            border: none;
            color: #4a5568;
            cursor: pointer;
            font-size: 14px;
            text-decoration: underline;
            padding: 0;
        }

        #logout-button:hover {
            color: #e53e3e;
        }

        /* í¬ë ˆë”§ íŒ¨í‚¤ì§€ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ìˆ˜ì • */
        .credit-packages {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 30px; /* ê°„ê²© ì¦ê°€ */
            margin: 40px 0; /* ìƒí•˜ ì—¬ë°± ì¦ê°€ */
            justify-items: center;
            padding-top: 10px; /* ìƒë‹¨ íŒ¨ë”© ì¶”ê°€ */
            position: relative;
            z-index: 1;
        }

        /* ì„ íƒ í‘œì‹œ ì•„ì´ì½˜ì„ ë³„ë„ ìš”ì†Œë¡œ ì¶”ê°€ */
        .selection-mark {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #FF5722;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            z-index: 10;
        }

        /* ì„ íƒ í‘œì‹œ ì•„ì´ì½˜ì€ JavaScriptì—ì„œ ì§ì ‘ ì œì–´ */
        .credit-package.selected .selection-mark {
            display: flex !important;
        }

        /* ì„ íƒëœ íŒ¨í‚¤ì§€ ë‚´ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ê°•í™” */
        .credit-package.selected .credit-amount {
            color: #FF5722 !important;
            font-weight: bold !important;
        }

        /* ì„ íƒëœ íŒ¨í‚¤ì§€ ë‚´ ê°€ê²© ê°•ì¡° */
        .credit-package.selected .package-price {
            color: #FF5722 !important;
            font-weight: bold !important;
        }

        /* ë°°ì§€ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .badge {
            position: absolute;
            top: -15px;
            right: 10px;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            z-index: 20;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
            overflow: visible;
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>í¬ë ˆë”§ êµ¬ë§¤</h1>
        <div class="user-info">
            <span>ì‚¬ìš©ì ID: <strong id="user-id-display">-</strong></span>
            <button id="logout-button">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
        <p>ì›í•˜ì‹œëŠ” í¬ë ˆë”§ íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
    </header>

    <div class="credit-packages" style="margin-top: 20px; overflow: visible;">
        <div class="credit-package" data-credit="10" data-price="1000">
            <div class="selection-mark">âœ“</div>
            <div class="package-header">
                <div class="credit-amount">10</div>
                <div class="credit-icon">ğŸ’°</div>
            </div>
            <div class="package-body">
                <div class="package-price">1,000ì›</div>
                <div class="package-description">ê¸°ë³¸ íŒ¨í‚¤ì§€</div>
            </div>
        </div>

        <div class="credit-package" data-credit="22" data-price="2000">
            <div class="selection-mark">âœ“</div>
            <div class="package-header">
                <div class="credit-amount">22</div>
                <div class="credit-icon">ğŸ’°</div>
            </div>
            <div class="package-body">
                <div class="package-price">2,000ì›</div>
                <div class="package-description">10% ì¶”ê°€ ë³´ë„ˆìŠ¤</div>
            </div>
        </div>

        <div class="credit-package" data-credit="48" data-price="4000">
            <div class="selection-mark">âœ“</div>
            <div class="package-header">
                <div class="credit-amount">48</div>
                <div class="credit-icon">ğŸ’°</div>
            </div>
            <div class="package-body">
                <div class="package-price">4,000ì›</div>
                <div class="package-description">20% ì¶”ê°€ ë³´ë„ˆìŠ¤</div>
            </div>
        </div>

        <div class="credit-package popular" data-credit="105" data-price="8000">
            <div class="badge" style="background-color: #3182F6;">ì¸ê¸°</div>
            <div class="selection-mark">âœ“</div>
            <div class="package-header">
                <div class="credit-amount">105</div>
                <div class="credit-icon">ğŸ’°</div>
            </div>
            <div class="package-body">
                <div class="package-price">8,000ì›</div>
                <div class="package-description">30% ì¶”ê°€ ë³´ë„ˆìŠ¤</div>
            </div>
        </div>

        <div class="credit-package" data-credit="300" data-price="20000">
            <div class="selection-mark">âœ“</div>
            <div class="package-header">
                <div class="credit-amount">300</div>
                <div class="credit-icon">ğŸ’°</div>
            </div>
            <div class="package-body">
                <div class="package-price">20,000ì›</div>
                <div class="package-description">50% ì¶”ê°€ ë³´ë„ˆìŠ¤</div>
            </div>
        </div>

        <div class="credit-package best-value" data-credit="1000" data-price="50000">
            <div class="badge" style="background-color: #00c471;">ìµœê³  ê°€ì¹˜</div>
            <div class="selection-mark">âœ“</div>
            <div class="package-header">
                <div class="credit-amount">1000</div>
                <div class="credit-icon">ğŸ’°</div>
            </div>
            <div class="package-body">
                <div class="package-price">50,000ì›</div>
                <div class="package-description">100% ì¶”ê°€ ë³´ë„ˆìŠ¤</div>
            </div>
        </div>
    </div>

    <div class="selected-package-info">
        <div id="payment-button-container">
            <button id="payment-button" class="payment-button">
                ê²°ì œí•˜ê¸°
            </button>
            <div class="payment-status" style="margin-top: 10px; font-size: 14px; color: #666; text-align: center;">
                íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•˜ì—¬ ê²°ì œë¥¼ ì§„í–‰í•˜ì„¸ìš”
            </div>
        </div>
    </div>
</div>

<!-- ì§ì ‘ ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ í¬í•¨ -->
<script>
    // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ íƒëœ íŒ¨í‚¤ì§€ ì¶”ì 
    let selectedPackage = null;

    // íŒ¨í‚¤ì§€ ì„ íƒ í•¨ìˆ˜
    function selectPackage(packageElement) {
        // ëª¨ë“  íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
        document.querySelectorAll('.credit-package').forEach(p => {
            p.classList.remove('selected');
            p.style.border = '1px solid #E5E8EB';
            p.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.05)';
            p.style.transform = 'none';
            p.style.backgroundColor = '#fff';
            p.style.zIndex = '1';

            const mark = p.querySelector('.selection-mark');
            if (mark) mark.style.display = 'none';
        });

        // ì„ íƒ ìƒíƒœ ì ìš©
        selectedPackage = packageElement;
        packageElement.classList.add('selected');
        packageElement.style.border = '3px solid #FF5722';
        packageElement.style.boxShadow = '0 5px 20px rgba(255, 87, 34, 0.3)';
        packageElement.style.transform = 'translateY(-5px)';
        packageElement.style.backgroundColor = '#FFF8F6';
        packageElement.style.zIndex = '3';

        const mark = packageElement.querySelector('.selection-mark');
        if (mark) mark.style.display = 'flex';

        // ì„ íƒ ì •ë³´ ì—…ë°ì´íŠ¸
        const creditAmount = packageElement.getAttribute('data-credit');
        const price = packageElement.getAttribute('data-price');

        // ê²°ì œ ìƒíƒœ UI ì—…ë°ì´íŠ¸
        const paymentStatus = document.querySelector('.payment-status');
        if (paymentStatus) {
            paymentStatus.textContent = `${creditAmount} í¬ë ˆë”§ - ${formatPrice(price)}ì› ê²°ì œ ì¤€ë¹„ ì™„ë£Œ`;
        }

        // ê²°ì œ ë²„íŠ¼ í™œì„±í™”
        const paymentButton = document.getElementById('payment-button');
        if (paymentButton) {
            paymentButton.disabled = false;
            paymentButton.style.opacity = '1';
        }
    }

    // ê°€ê²© í¬ë§·íŒ… í•¨ìˆ˜ (1000 -> 1,000)
    function formatPrice(price) {
        return Number(price).toLocaleString('ko-KR');
    }

    // í˜ì´ì§€ ë¡œë“œ í›„ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', () => {
        // UID í™•ì¸ ë° ë¦¬ë‹¤ì´ë ‰íŠ¸
        const userId = sessionStorage.getItem('userId');
        if (!userId) {
            window.location.href = '/index.html';
            return;
        }

        // ì‚¬ìš©ì ID í‘œì‹œ
        const userIdDisplay = document.getElementById('user-id-display');
        if (userIdDisplay) {
            userIdDisplay.textContent = userId;
        }

        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
        const logoutButton = document.getElementById('logout-button');
        if (logoutButton) {
            logoutButton.addEventListener('click', () => {
                sessionStorage.removeItem('userId');
                window.location.href = '/index.html';
            });
        }

        // ê° íŒ¨í‚¤ì§€ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        document.querySelectorAll('.credit-package').forEach(packageItem => {
            // ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì •
            packageItem.style.cursor = 'pointer';

            // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
            packageItem.addEventListener('click', function (e) {
                e.preventDefault();
                selectPackage(this);
            });

            // ë§ˆìš°ìŠ¤ì˜¤ë²„ íš¨ê³¼
            packageItem.addEventListener('mouseover', function () {
                if (!this.classList.contains('selected')) {
                    this.style.transform = 'translateY(-3px)';
                    this.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
                }
            });

            // ë§ˆìš°ìŠ¤ì•„ì›ƒ íš¨ê³¼
            packageItem.addEventListener('mouseout', function () {
                if (!this.classList.contains('selected')) {
                    this.style.transform = '';
                    this.style.boxShadow = '';
                }
            });
        });

        // ê²°ì œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ - checkout.htmlë¡œ ì´ë™
        const paymentButton = document.getElementById('payment-button');
        if (paymentButton) {
            paymentButton.addEventListener('click', function () {
                if (!selectedPackage) {
                    alert('í¬ë ˆë”§ íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                const creditAmount = selectedPackage.getAttribute('data-credit');
                const price = selectedPackage.getAttribute('data-price');
                const productName = `${creditAmount} í¬ë ˆë”§`;

                // ì£¼ë¬¸ ID ìƒì„±
                const orderId = 'order_' + new Date().getTime() + '_' + Math.random().toString(36).substring(2, 8);

                // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì„ íƒí•œ íŒ¨í‚¤ì§€ ì •ë³´ ì €ì¥
                sessionStorage.setItem('selectedCreditAmount', creditAmount);
                sessionStorage.setItem('selectedPrice', price);
                sessionStorage.setItem('orderId', orderId);
                sessionStorage.setItem('productName', productName);

                // checkout.htmlë¡œ ì´ë™ - íŒŒë¼ë¯¸í„° ì „ë‹¬
                window.location.href = `/checkout.html?orderId=${orderId}&amount=${price}&orderName=${encodeURIComponent(productName)}&userId=${encodeURIComponent(userId)}&creditAmount=${creditAmount}`;
            });
        }

        // ì¸ê¸° íŒ¨í‚¤ì§€ ìë™ ì„ íƒ
        const popularPackage = document.querySelector('.credit-package.popular');
        if (popularPackage) {
            selectPackage(popularPackage);
        }
    });
</script>
</body>
</html>
